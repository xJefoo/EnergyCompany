openapi: 3.0.3
info:
  title: Sensedia Energy API
  description: API para gestão de faturas e serviços de energia elétrica
  version: 1.0.0
tags:
  - name: Regra de Negócio
    externalDocs:
      description: Documentação
      url: https://docs.google.com/document/d/1BKY7FFuiM0_929unEMPbzIEqIr6nMPjOJkxZU4yXBGg/edit?usp=sharing
  - name: Microserviços
    description: Java e funções SAP
    externalDocs:
      description: Fluxo Webservice
      url: https://mermaid.live/view#pako:eNqdVV1T2kAU_St39kWdAScBVMCZdgIRa6uI2voFjrMmC-6U7DKbxPEj_pi2D50-9yfwx3qTBTdQwRnfyHLPufeeczZ5Ip70GamTgaKjW_jqbvdET4TxjX7ukdYwvpd1aCpOFbTlHYUWjWJFe6QnAJxuc8iZiNgVFIsfkhM55B6P6Pj3-JeEEVUUvAwoUmA_AybQ6DqdvavtFN_IYB2qxj8DFikZwt34x5D7MvyYQHN1FdbW0rKmZudBAm4KzljzpJrNzcqcSPGbmEMcgIgDpuT1tPFORpgrdVmfCwZhhAUheDKQsJJS-3QlgdZ89TGLpBK40vivzwcSfAaKhSOJcFgpWTZidg1mN8Mc4L-owswg8NLRNPtkgHrZNiqYwF53adOKZa3o1ffy3QImQjpgQVrMlMKlJi5BH7mYh_rC-A9wMREb-3-e9mfCfz0BhzcRU-CyiA5vWQj-bBC-vBkEmeH9HH5qy77Jw36Gbk1kuudhxDAIB0acA5OEdpYENdHnf2LN2F5oQwHu6FCqAkJD9MGjEo0RMmDXnl4lgcP5xtqVjj4O0_NOdq6Jp-HFkY9mhtMmVKwKFCeqgUiFYcKTAgfDCOhpj5bbuACbwPF00CUGdpT0WBjibezQAUXyKEtT3sVvb7o4eiEZ5UniwNh5auw8fdXOM6PqmbHzvGuyxXLsLy8ETXluEBeZxtOJchC8yBDG6anUoAv9Ysg5ktcWdexzFeg1E7g0410usmMO4jgGc54LitN4NQY2xsB4kLlJYyzhjxQvox7ZaSyPwmI8tm3OKzwZx31fKh33nbF0dmZeK6RA8JoElPv4wXlKmXskumUB65E6_vSp-p7m8Bnr0n1OHoRH6pGKWYHEI59GzOUUQx1MD0dUXEqZfyT1J3JP6sWytblub9hbWzW7Uq5W7I0CeSD1Utla36yV7ZpVrdasjVqp9FwgjxmDvW6VbbtUqlRRD7tsWVvP_wDYSWWa
  - name: Banco de Dados
    description: Queries e funções SQL
    externalDocs:
      description: Fluxo SQL
      url: https://mermaid.live/view#pako:eNptkd9OwjAUxl-lOTfcABmjbDISDYr8UaJEiBcyLsp6hMatJV2XiMDT-Ci-mN0AnYl37dfv950vPTuIFEcIYKXZZk1mvU4o02x5vIXQj7N3FZDHpUFNxiI1jHAkE614ZlQaQigJ6fbnN7FAaXBBarXL_VTFIhLWGZ_9m5N_T7qDeXcyWnQKblDYn1GLVxExIhlZshRzgDNeuIfzayYjlUu9XDqBwwKcYfKTfGXNox05HN9Hxx4isepdaeBdoT-hUdoOK7Xql7mHr09ltfsSeP8HTFCmbGWnV6alCpXfnGO_W62L5pGyPxobZt_Hpczx_5kWwBykDj0FouShhCokqBMmuN3VLg8IwawxwRACe-RMv-XbOFgfs22mWxlBYHSGVcg2nBnsCWaXmpzFDZMvSpWvEOzgHYKmV3eo6zWp16au23AaVdhC4NVbDvUdr-H6Dr1wLhqHKnwUvFP3fc9vuq7XatO2S9vNwzfCvr1W

paths:
  /api/faturas:
    post:
      tags:
      - Microserviços
      summary: Criar uma nova fatura
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cliente_id:
                  type: number
                valor:
                  type: number
                descricao:
                  type: string
              required:
                - cliente_id
                - valor
      responses:
        '201':
          description: Fatura criada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  numero_fatura:
                    type: string
                  status:
                    type: string
                    enum: [criada, paga, cancelada]
              example:
                numero_fatura: "12345"
                status: "criada"
        '400':
          description: Cliente inválido fornecido
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: "Cliente fornecido é inválido"

  /api/faturas/{numero_fatura}:
    get:
      tags:
      - Microserviços
      summary: Obter detalhes de uma fatura
      parameters:
        - name: numero_fatura
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Detalhes da fatura recuperados com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  numero_fatura:
                    type: string
                  valor:
                    type: number
                  descricao:
                    type: string
                  nome_cliente:
                    type: string
              example:
                numero_fatura: "12345"
                valor: 100.0
                descricao: "Serviços de energia"
                nome_cliente: "Cliente Exemplo"
        '404':
          description: Fatura não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: "Fatura não encontrada"

  /api/faturas/{numero_fatura}/pagamento:
    post:
      tags:
      - Microserviços
      summary: Processar pagamento de uma fatura
      parameters:
        - name: numero_fatura
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                forma_pagamento:
                  type: string
                numero_cartao:
                  type: string
                valor:
                  type: number
              required:
                - forma_pagamento
                - numero_cartao
                - valor
      responses:
        '200':
          description: Pagamento processado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: "Pagamento processado com sucesso"
        '401':
          description: Pagamento não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: "Pagamento não autorizado"

  /api/produtos/:
    get:
      tags:
      - Banco de Dados
      summary: Retorna os produtos existentes na base
      responses:
        '200':
          description: Lista de produtos e serviços recuperada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  products:
                    type: array
                    items:
                      type: object
                      properties:
                        product_id:
                          type: string
                        name:
                          type: string
              example:
                products:
                  - product_id: "1"
                    name: "Energia Elétrica"
                  - product_id: "2"
                    name: "Manutenção de Equipamentos"
        '404':
          description: Produto não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: "Produto não encontrado"
